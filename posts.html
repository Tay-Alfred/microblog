<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Level Up Lounge - Home</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="stylesheet" href="css/posts.css">
    <!-- Run BEFORE page is finished loading (before window.onload): -->
    <!-- <script src="../auth.js"></script>
    <script>
        if (isLoggedIn() === false) window.location.replace("/");
    </script> -->
</head>


<body>
    <header>
        <nav class="navbar bg-body-tertiary">
            <div class="container-fluid">
                <a class="navbar-brand" href="landing.html"><img src="images/lvluplogo.png" width="55px" alt="Logo"></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
                    aria-controls="offcanvasNavbar" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar"
                    aria-labelledby="offcanvasNavbarLabel">
                    <div class="offcanvas-header">
                        <h5 class="offcanvas-title silkscreen-regular" id="offcanvasNavbarLabel">Level Up Lounge</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
                    </div>
                    <div class="offcanvas-body silkscreen-regular">
                        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                            <li class="nav-item">
                                <a class="nav-link" href="profile.html">Profile</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#">Link</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="survey.html">Dead By Daylight Survey (New!)</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="speakeezy.html">Speakeezy Station</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                                    aria-expanded="false">
                                    Profile
                                </a>
                                <ul class="dropdown-menu">
                                    <li><a class="dropdown-item" href="registration.html">Sign Up</a></li>
                                    <li><a class="dropdown-item" href="#loginBox">Log In</a></li>
                                    <li>
                                        <hr class="dropdown-divider">
                                    </li>
                                    <li><a class="dropdown-item" href="profile.html">Edit Lounge</a></li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </nav>
    </header>
    
    <div class="container">
    <h2>Posts</h2>
    
    <!-- Form to create a new post -->
    <form class="post-form" id="postForm">
        <textarea id="postContent" placeholder="What's on your mind?"></textarea>
        <button type="submit">Post</button>
    </form>

    <!-- Display existing posts -->
    <div id="postsContainer">
        <!-- Posts will be dynamically added here -->
    </div>
</div>

<script>
    // Sample data for initial posts
    const initialPosts = [
        { content: "Hello, world!", author: "John Doe", timestamp: "2 hours ago" },
        { content: "This is a sample post.", author: "Jane Smith", timestamp: "1 hour ago" }
    ];

    // Function to display posts
    function displayPosts(posts) {
        const postsContainer = document.getElementById('postsContainer');
        postsContainer.innerHTML = '';

        posts.forEach(post => {
            const postElement = document.createElement('div');
            postElement.classList.add('post');

            const contentElement = document.createElement('div');
            contentElement.classList.add('content');
            contentElement.textContent = post.content;

            const authorElement = document.createElement('div');
            authorElement.classList.add('author');
            authorElement.textContent = `Posted by ${post.author}`;

            const timestampElement = document.createElement('div');
            timestampElement.classList.add('timestamp');
            timestampElement.textContent = post.timestamp;

            postElement.appendChild(contentElement);
            postElement.appendChild(authorElement);
            postElement.appendChild(timestampElement);

            postsContainer.appendChild(postElement);
        });
    }

    // Function to handle form submission and add new post
    document.getElementById('postForm').addEventListener('submit', function(event) {
        event.preventDefault();

        const postContent = document.getElementById('postContent').value;
        const newPost = {
            content: postContent,
            author: "Anonymous", // Replace with actual user's name or username
            timestamp: new Date().toLocaleString()
        };

        // Add new post to the beginning of the array (simulating new post prepended)
        initialPosts.unshift(newPost);

        // Clear input field
        document.getElementById('postContent').value = '';

        // Display posts including the new one
        displayPosts(initialPosts);
    });

    // Initial display of posts
    displayPosts(initialPosts);
</script>
</body>
    <div class="spotify-player">
        <iframe src="https://open.spotify.com/embed/playlist/37i9dQZF1DXcBWIGoYBM5M" width="75%" height="600"
            frameborder="0" allowtransparency="true" allow="encrypted-media"></iframe>
    </div>

</body>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
<script src="scripts/posts.js"></script>

</html>